<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>いんぬ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- MapLibre GL CSS -->
  <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: sans-serif;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    #infoPanel {
      position: absolute;
      top: 0;
      right: 0;
      width: 40%;
      max-width: 500px;
      height: 100%;
      background: #fff;
      box-shadow: -4px 0 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 10;
    }

    #infoPanel.active {
      transform: translateX(0);
    }

    .country-title {
      font-size: 24px;
      margin-bottom: 10px;
    }

    .slide {
      display: flex;
      margin-bottom: 20px;
      background: #f5f5f5;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .slide img {
      width: 150px;
      height: 100px;
      object-fit: cover;
      border-radius: 10px;
      margin-right: 15px;
    }

    .slide-content {
      flex: 1;
    }

    .breed-title {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 5px;
    }

    #filterButtons {
      margin-bottom: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    #filterButtons button {
      padding: 5px 10px;
      background-color: #eee;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    #filterButtons button:hover {
      background-color: #ddd;
    }
  </style>
</head>
<body>

<div id="map"></div>
<div id="infoPanel"></div>

<!-- MapLibre GL JS -->
<script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>

<script>
  let currentCountry = null;
  let currentDogs = [];

  const countryData = {
    japan: {
      title: '日本',
      dogs: [
        {
          name: '秋田犬',
          size: '大型犬',
          group: '原始の犬/スピッツ',
          features: '忠誠心が強く、家族に対してとても愛情深い。警戒心も強く、番犬にも向く。',
          image: 'akita.jpg'
        },
        // 他の日本の犬種をここに追加可能
      ]
    },
    germany: {
      title: 'ドイツ',
      dogs: [
        {
          name: 'ジャーマン・シェパード',
          size: '大型犬',
          group: '使役犬',
          features: '非常に賢く忠実で、警察犬や盲導犬としても活躍。',
          image: 'gsd.jpg'
        }
      ]
    },
    uk: {
      title: 'イギリス',
      dogs: [
        {
          name: 'ラブラドール・レトリーバー', size: '大型犬', group: '鳥猟犬', features: '温厚で知能が高く、家庭犬や盲導犬として世界中で人気。', image: 'labrador.jpg'
        },
        {
          name: 'ゴールデン・レトリーバー', size: '大型犬', group: '鳥猟犬', features: 'フレンドリーで忍耐強く、家庭向き。訓練にもよく応じる。', image: 'golden.jpg'
        },
        {
          name: 'ボーダー・コリー', size: '中型犬', group: '牧羊犬', features: '非常に賢くエネルギッシュ。作業能力が高く、競技向け。', image: 'bordercollie.jpg'
        },
        {
          name: 'ジャック・ラッセル・テリア', size: '小型犬', group: 'テリア/ダックス', features: '活発で好奇心旺盛。小さいがエネルギーに満ちている。', image: 'jackrussell.jpg'
        },
        {
          name: 'イングリッシュ・コッカー・スパニエル', size: '中型犬', group: '鳥猟犬', features: '優しい性格で家庭犬向き。長い耳が特徴的。', image: 'englishcocker.jpg'
        }
      ]
    }
  };

  const map = new maplibregl.Map({
    container: 'map',
    style: 'https://demotiles.maplibre.org/style.json',
    center: [139.7671, 35.6812],
    zoom: 2
  });

  function addMarker(lng, lat, countryKey) {
    const el = document.createElement('div');
    el.className = 'marker';

    el.style.backgroundImage = 'url("mappin.png")';
    el.style.backgroundSize = 'contain';
    el.style.backgroundRepeat = 'no-repeat';
    el.style.width = '60px';
    el.style.height = '60px';
    el.style.cursor = 'pointer';

    el.addEventListener('click', (e) => {
      e.stopPropagation();
      showInfo(countryKey);
    });

    new maplibregl.Marker(el)
      .setLngLat([lng, lat])
      .addTo(map);
  }

  addMarker(139.6917, 35.6895, 'japan');
  addMarker(13.4050, 52.5200, 'germany');
  addMarker(-0.1276, 51.5072, 'uk');

  function showInfo(countryKey) {
    const panel = document.getElementById('infoPanel');
    const data = countryData[countryKey];
    currentCountry = countryKey;
    currentDogs = data.dogs;
    panel.classList.add('active');

    renderDogs(data.title, currentDogs);
  }

  function renderDogs(title, dogList) {
    const panel = document.getElementById('infoPanel');
    let html = `<div class="country-title">${title}</div>
                <div id="filterButtons">
                  <button onclick="filterDogs('all')">すべて</button>
                  <button onclick="filterDogs('小型犬')">小型犬</button>
                  <button onclick="filterDogs('中型犬')">中型犬</button>
                  <button onclick="filterDogs('大型犬')">大型犬</button>
                </div>`;

    dogList.forEach(dog => {
      html += `
        <div class="slide">
          <img src="${dog.image}" alt="${dog.name}">
          <div class="slide-content">
            <div class="breed-title">${dog.name}</div>
            <div><strong>サイズ：</strong>${dog.size}</div>
            <div><strong>グループ：</strong>${dog.group}</div>
            <div><strong>特徴：</strong>${dog.features}</div>
          </div>
        </div>`;
    });

    panel.innerHTML = html;
  }

  function filterDogs(size) {
    if (!currentDogs || !currentCountry) return;
    const filtered = size === 'all' ? currentDogs : currentDogs.filter(d => d.size === size);
    const title = countryData[currentCountry].title;
    renderDogs(title, filtered);
  }

  map.on('click', () => {
    const panel = document.getElementById('infoPanel');
    panel.classList.remove('active');
    panel.innerHTML = '';
  });
</script>

</body>
</html>
